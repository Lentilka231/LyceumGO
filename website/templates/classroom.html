{%extends "baselog.html"%}
{%block title%}Třída{% endblock %}
{%block head%}
<link rel= "stylesheet" type= "text/css" href="{{url_for('static', filename='/stylesheets/classroom.css')}}">
<link rel= "stylesheet" type= "text/css" href="{{url_for('static', filename='/stylesheets/zarovnavac.css')}}">
{%endblock%}
{%block content%}
<div id="flex-container">
{%if not user.classroom%}
    {%if user.person=="s"%}
        <div id="studentdiv">
            <div id="content">
                <form action="" method="POST">
                    <div class="Input">
                        <input type="text" name="code" placeholder="Zadej kód" class="Inputs">
                    </div>
                    <div class="Input">
                        <button class="BasicButton" name="submit_button" value="findclass" id="tlacitko">Odeslat</button>
                    </div>
                </form>
            </div>
        </div>
    {%elif user.person=="t"%}
        <div id="uciteldiv">
            <form action="" method="POST" style="margin:auto">
                <input type="text" name="name" placeholder="Enter name" class="Inputs">
                <button class="BasicButton" value="createclass" name="submit_button" id="tlacitko">Vytvořit třídu</button> 
            </form>
        </div>
    {%endif%}
{%else%}

<div id="MainDiv">
    <div id="ClassInfo">   
        <div id="Name"><b>{{classroom.name}}</b></div>
        <div id="info">
            <div class="i">Učitel/ka: {{classroom.teacher}}</div>
            <div class="i">Založeno: {{classroom.beginning}}</div>
            {%if user.person=="t"%}
                <div class="i">Code: {{classroom.code}}</div>
                <div class="i">Učitel/ka němčiny:
                    <form method="POST"> 
                    <input id="germanTeacherInput" maxlength="20" name="GermanTeacher" value="{%if classroom.germanteacher%}{{classroom.germanteacher}}{%endif%}" placeholder="{%if classroom.germanteacher%}{{classroom.germanteacher}}{%endif%}">
                    <button name="submit_button" value="newTeacher" type="submit" id="GermanTeacherSubmit" style="display:none">Uložit</button>
                    </form>
                </div>
            {%endif%}
            <div id="ScheduledTests">
                <form method="POST">
                    {%if user.person=="s"%}
                        {%for i in classroom.scheduledtests%}
                        <button class="testDiv" name="submit_button" value="testincoming{{i.id}}">
                            <b>{{i.testname}}</b><br>
                            Kdy: {{i.datum[5:7]+'. '+i.datum[8:10]+'. ('+i.datum[11:]+')'}}<br>
                            Doba trvání: {{i.duration}} min.<br>
                            {%if i.info%}
                            {{i.info}}
                            {%endif%}
                        </button>
                        {%endfor%}
                    {%else%}
                        {%for i in classroom.scheduledtests%}
                        <button class="testDiv" name="submit_button" value="resaults{{i.id}}">
                            <b>{{i.testname}}</b><br>
                            Kdy: {{i.datum[5:7]+'. '+i.datum[8:10]+'. ('+i.datum[11:]+')'}}<br>
                            Doba trvání: {{i.duration}} min.<br>
                            {%if i.info%}
                            {{i.info}}
                            {%endif%}
                        </button>
                        {%endfor%}
                    {%endif%}
                </form>
            </div>
        </div>
    </div>
    <table style="width:100%;">
        <thead>
            <tr style="height:50px;background-color: rgb(55, 55, 55);color:var(--theBrightestBlue);border-bottom:1px solid black">
                <th style="width:3%">Id</th>
                <th style="width:70%">Jméno</th>
                <th style="width:90%">Oblíbený předmět</th>
                {%if user.person=="t"%}<th style="width:90%"></th>{%endif%}
            </tr>
        </thead>
        <tbody>
            <form method="POST">
            {%for i,v in students%}
                <tr class="sinfo">
                    <td>{{i+1}}</td>
                    <td>{{v.name}}</td>
                    <td>{{v.favouritesub}}</td>
                    {%if user.person=="t"%}<td><button value="kickstudent-{{v.id}}" name="submit_button" id="kickstudent">✕</button></td>{%endif%}
                </tr>
            {%endfor%}
            </form>
        </tbody>
    </table>
</div>
</div>
<script>
    $(document).ready(function(){
        for(let i=0;i<4;i++){
            $("#s"+i).hide();
        }
        $("#s0").show();
        for(let i=1;i<=4;i++){
            $("#o"+i).click(function(){
                for(let i=0;i<4;i++){
                    $("#s"+i).hide();
                }
                $("#s"+(i-1)).show();
            });
        }   
    });
    document.getElementById("germanTeacherInput").addEventListener("change",function(){
        document.getElementById("GermanTeacherSubmit").style.display="block";
    });
</script>
{%endif%}
{%endblock%}